<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ blog_title }}</title>
        <meta name="description" content="A chapter for a book that'll never exist.">
        <meta name="author" content="K Lars Lohn">
        <meta name="robots" content="noindex">
        <link rel="stylesheet" href="../gf4ulgcxmm/style.css" />
    </head>
    <body>
        <img class="header-image" src="{{ blog_header_url or "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhz-_-xY83xHIQA7sf3HX1uqgMwouQIgF5l1l8WwZV6n1-mQgBxoaWFfWjdj8KELI9yyNb9GGlb5bb7dfUt3-xAJHSCvmMfNp3VvT8N_b0tUVz1T4TE9o36O7dbKZ8cust1SJKa_JXtttgHjoKra2jtFBuifAgCYUiMk7l4O8zzPAkmtSe3o42iTg/s1600/dead-of-winter.png" }}"/>
        
        <div class="top-bar">
            <div class="title"><a href="https://twobraids.com">twobraids</a></div>
        </div>
    
        <div class="content">
            <h1>{{ blog_title }}</h1>
    
        
            <div class="lars-nav-section">
                <div class="lars-nav-newer">
                {% if prev %}
                    <a href="{{ prev.blog_relative_url }}#top">&#9668; Story Arc Backward</a><br />
                {% else %}
                    <span class="lars-nav-not-written">&#9668; Story Arc Backward</span><br />
                {% endif %}
                </div>
                <div class="lars-nav-center">
                    <a href="{{ contents_relative_url }}">Going to the Sun - Contents</a>
                </div>
                <div class="lars-nav-older">
                {% if next %}
                    <a href="{{ next.blog_relative_url }}#top">Story Arc Forward &#9658;</a><br />
                {% else %}
                    <span class="lars-nav-not-written">Story Arc Forward &#9658;</span><br />
                {% endif %}
                </div>
            </div>
            
            <p>&nbsp;</p>
            
            <div class="lars-inner-box">
                {% if blog_author_note %}
                  <p><strong>Author's Note:</strong></p>
                  <p>{{ blog_author_note }}</p>
                {% endif %}
                {% if blog_publish_date %}
                  <p>Original Post: {{ blog_publish_date }}<br />
                  Latest Update: {{ blog_update_date }}</i></p>
                {% endif %}
                {% if blog_long_warning or blog_short_warning %}
                  <p> <span class="yellow"><strong>CONTENT WARNING</strong></span><br />
                  {{ blog_long_warning or blog_short_warning }}</p>
                {% endif %}
                {% if blog_author_note and "placeholder" in blog_author_note %}
                  <p class="green"><a href="{{ next.blog_relative_url }}#top">Skip to the next chapter &#9658;</a></p>
                {% endif %}
                {% if blog_updates_present %}
                  <p>The symbol <b><span id="Ustart" class=orange>&#x25CF;</span></b> indicates an <br />
                  updated paragraph within the last 10 days.<br />
                  The darker the symbol, the older the update.</p>
                {% endif %} 
            </div>
                  
            {{ content_html }}
            
            {% if blog_author_note and "placeholder" in blog_author_note %}
            {% else %}
                <div class="lars-nav-section">
                    <div class="lars-nav-newer">
                    {% if prev %}
                        <a href="{{ prev.blog_relative_url }}#top">&#9668; Story Arc Backward</a><br />
                    {% else %}
                        <span class="lars-nav-not-written">&#9668; Story Arc Backward</span><br />
                    {% endif %}
                    </div>
                    <div class="lars-nav-center">
                        <a href="{{ contents_relative_url }}">Going to the Sun - Contents</a>
                    </div>
                    <div class="lars-nav-older">
                    {% if next %}
                        <a href="{{ next.blog_relative_url }}#top">Story Arc Forward &#9658;</a><br />
                    {% else %}
                        <span class="lars-nav-not-written">Story Arc Forward &#9658;</span><br />
                    {% endif %}
                    </div>
                </div>
            {% endif %}
            
            <div class="lars-inner-box">
              <p>This is a work of fiction based on experiences from my life.</p>
              <p>Â©2025 by K Lars Lohn All rights reserved</p>
              <iframe src="https://www.twobraids.com/p/chapter.html" width="1" height="1" style="border:0; visibility:hidden;"></iframe>
            </div>
            
        </div>
{% if blog_updates_present %}
<script>
/**
    * Fluid Scrolling for Edited Paragraphs
    *
    * This script enables smooth scrolling between elements with specific IDs
    * ('Ustart', 'U0001', etc.), triggered by single or double clicks.
    */
document.addEventListener('DOMContentLoaded', () => {

    // ========== CONFIGURATION ==========
    const config = {
        // Duration of the scroll animation in milliseconds.
        scrollDuration: 800,

                                               // Easing function for the animation (easeInOutCubic).
        // You can find other easing functions online (e.g., at easings.net).
        easing: t => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,

        // For the 'Ustart' dot: how many lines from the top to position the first dot.
        startDotOffsetLines: 3,

                                                                                   // Your site's line-height. Used to calculate the pixel offset above.
        // Use a number (e.g., 1.5 for "line-height: 1.5;").
        lineHeight: 1.5,
                 };
    // ===================================


    const startDot = document.getElementById('Ustart');
    // Select all paragraph dots, convert the NodeList to an Array, and sort them by ID.
    // The 'U0' prefix ensures we don't accidentally grab 'Ustart' here.
    const paragraphDots = Array.from(document.querySelectorAll('span[id^="U0"]'))
    .sort((a, b) => a.id.localeCompare(b.id));

                                // If there are no paragraph dots, there's nothing to do.
    if (paragraphDots.length === 0) {
        if (startDot) startDot.style.display = 'none'; // Optionally hide start dot
    return;
    }

    let isScrolling = false;

    /**
        * The main scroll animation function.
        * @param {number} targetY - The absolute vertical position (in pixels) to scroll to.
        */
    function smoothScrollTo(targetY) {
        if (isScrolling) return; // Prevent multiple scrolls at once

        const startY = window.scrollY;
        const distance = targetY - startY;
        let startTime = null;
        isScrolling = true;

        function animation(currentTime) {
            if (startTime === null) startTime = currentTime;
            const timeElapsed = currentTime - startTime;
            const progress = Math.min(timeElapsed / config.scrollDuration, 1);
            const easedProgress = config.easing(progress);

            window.scrollTo(0, startY + distance * easedProgress);

            if (timeElapsed < config.scrollDuration) {
                requestAnimationFrame(animation);
                } else {
                isScrolling = false;
            }
        }
        requestAnimationFrame(animation);
    }

    /**
        * Calculates the target scroll position and initiates the scroll.
        * @param {HTMLElement} clickedDot - The dot that was clicked.
        * @param {HTMLElement} targetDot - The destination dot.
        */
    function scrollToDot(clickedDot, targetDot) {
        let targetY;

        if (clickedDot.id === 'Ustart') {
            // Special case: Position the first dot a few lines from the top.
            const bodyFontSize = parseFloat(getComputedStyle(document.body).fontSize);
            const offset = config.startDotOffsetLines * config.lineHeight * bodyFontSize;
            targetY = targetDot.getBoundingClientRect().top + window.scrollY - offset;
            } else {
            // Standard case: Make the target dot appear where the clicked dot was.
            const startPosTop = clickedDot.getBoundingClientRect().top;
            const targetPosTop = targetDot.getBoundingClientRect().top;
            const scrollDistance = targetPosTop - startPosTop;
            targetY = window.scrollY + scrollDistance;
        }

        smoothScrollTo(targetY);
    }

    /**
        * Handles forward navigation (single-click).
        * @param {Event} event - The click event.
        */
    function handleForward(event) {
        const clickedDot = event.currentTarget;
        let targetDot;

        if (clickedDot.id === 'Ustart') {
            targetDot = paragraphDots[0];
            } else {
            const currentIndex = paragraphDots.indexOf(clickedDot);
            // Loop from the last dot back to the first one.
            const nextIndex = (currentIndex + 1) % paragraphDots.length;
            targetDot = paragraphDots[nextIndex];
        }
        scrollToDot(clickedDot, targetDot);
    }

    /**
        * Handles backward navigation (double-click).
        * @param {Event} event - The dblclick event.
        */
    function handleBackward(event) {
        const clickedDot = event.currentTarget;
        const totalDots = paragraphDots.length;

        // Double-clicking Ustart is an edge case; we'll go to the last dot.
        if (clickedDot.id === 'Ustart') {
            scrollToDot(clickedDot, paragraphDots[totalDots - 1]);
        return;
        }

        const currentIndex = paragraphDots.indexOf(clickedDot);
        // The formula `(a % n + n) % n` correctly handles negative results for modulo.
        const prevIndex = ((currentIndex - 1) % totalDots + totalDots) % totalDots;
        const targetDot = paragraphDots[prevIndex];
        scrollToDot(clickedDot, targetDot);
    }

    // Attach event listeners to all the dots
    if (startDot) {
        startDot.addEventListener('click', handleForward);
        startDot.addEventListener('dblclick', handleBackward);
    }

    paragraphDots.forEach(dot => {
        dot.addEventListener('click', handleForward);
        dot.addEventListener('dblclick', handleBackward);
        });
});

</script>

{% endif %}

    </body>

<html>
